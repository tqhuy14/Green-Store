<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard - SB Admin</title>
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    <script th:src="@{https://use.fontawesome.com/releases/v6.3.0/js/all.js}" crossorigin="anonymous"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js}" crossorigin="anonymous"></script>
    <script th:src="@{/js/scripts.js}"></script>
    <link th:href="@{/css/table.css}" rel="stylesheet"/>
    <link th:href="@{/css/createform.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css}"/>
</head>
<body class="sb-nav-fixed">
<header th:replace="layout/header :: header"></head>></header>

<div id="layoutSidenav">
    <div th:replace="layout/nav :: nav" ></div>
    <div id="layoutSidenav_content">
        <main class="mt-4">
        <div style="width: 45%; margin: 0 auto;" class="shadow border-dark">
        <h3 style="background: #198754; text-align: center; color: white; font-family: Serif; line-height: 50px;">Thêm Tài Khoản</h3>
        <form th:action="@{/users/new}" th:object="${user}" method="post" class="form-inline mb-4">

            <div th:if="${info1 == 'success'}" id="notification" class="form-group notification success" style="padding: 15px 15px; position: relative; border: 1px solid darkslategray">
                <strong style="color: #1a1e21">Tài khoản đã được lưu thành công! </strong>
                <span style="margin-left: 10px"><a th:href="@{/users}">Trở về</a></span>
                <button type="button" class="btn-close" aria-label="Close" onclick="this.parentElement.style.display='none';" style="position: absolute; top: 15px; right: 10px;"></button>
            </div>


            <div class="form-group" style="padding-top: 10px">
                <label for="name">Họ và tên:</label>
                <input type="text" id="name" name="name" class="form-control ml-2" th:value="${user.name}" required>
                <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" class="form-control ml-2" th:value="${user.email}">
                <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label for="phone">Số điện thoại:</label>
                <input type="text" id="phone" name="phone" class="form-control ml-2" th:value="${user.phone}">
                <span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label for="username">Tên tài khoản:</label>
                <input type="text" id="username" name="username" class="form-control ml-2" th:value="${user.username}" required>
                <span th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="text-danger"></span>
            </div>
            <div  class="form-group position-relative">
                <label for="password">Mật Khẩu:</label>
                <input type="password" id="password" name="password" class="form-control ml-2" required>
                <i id="togglePassword" class="bi bi-eye-slash-fill position-absolute" style="margin-top: 7px; right: 15px; top: 38px; cursor: pointer; color: gray;"></i>
                <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label for="username">Vai Trò:</label>
                <input type="text" id="role" name="role" class="form-control ml-2" th:value="${user.role}">
                <span th:if="${#fields.hasErrors('username')}" th:errors="*{role}" class="text-danger"></span>
            </div>
            <div class="form-group" style="padding-bottom: 40px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px">
                <button type="submit" class="btn btn-success shadow">Lưu</button>
                <a class="btn btn-secondary shadow" th:href="@{/users}">Hủy</a>
            </div>
        </form>
        </div>
    </main>
        <footer th:replace="layout/footer :: footer"></footer>
    </div>
</div>

<script>
    const togglePassword = document.querySelector('#togglePassword');
    const passwordInput = document.querySelector('#password');

    togglePassword.addEventListener('click', function (e) {
        // Toggle giữa hiển thị và ẩn mật khẩu
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);

        // Đổi icon
        this.classList.toggle('bi-eye-fill');
        this.classList.toggle('bi-eye-slash-fill');
    });
</script>
</body>
</html>